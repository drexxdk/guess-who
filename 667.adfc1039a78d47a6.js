"use strict";(self.webpackChunkguess_who=self.webpackChunkguess_who||[]).push([[667],{667:(le,_,s)=>{s.r(_),s.d(_,{GameModule:()=>re});var l=s(6895),m=s(5033),w=s(9715),S=s(5698),c=s(2997);const u="[Game] ",C=(0,c.PH)(u+"Fetch Game",(0,c.Ky)()),f=(0,c.PH)(u+"Fetch Game Loading"),M=(0,c.PH)(u+"Fetch Game Success",(0,c.Ky)()),h=(0,c.PH)(u+"Fetch Game Failure",(0,c.Ky)()),P="GameState",F=(0,c.Lq)({status:"pending",game:void 0},(0,c.on)(f,(t,o)=>({...t,status:"loading"})),(0,c.on)(M,(t,o)=>({...t,status:"success",game:o.game})),(0,c.on)(h,(t,o)=>({...t,status:"error"}))),O=(0,c.ZF)(P),L=(0,c.P1)(O,t=>t.game),k=(0,c.P1)(O,t=>"loading"===t.status);var e=s(4650);const T=["text",""];let v=(()=>{class t{constructor(n){this.elementRef=n,this.align="left"}ngOnInit(){this.elementRef.nativeElement.dataset.align=this.align}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(e.SBq))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-headline","text",""]],inputs:{text:"text",align:"align"},attrs:T,decls:1,vars:1,template:function(n,i){1&n&&e._uU(0),2&n&&e.hij("",i.text,"\n")},styles:["[_nghost-%COMP%]{display:block;font-size:1.8rem;font-weight:700}[data-align=left][_nghost-%COMP%]{text-align:left}[data-align=center][_nghost-%COMP%]{text-align:center}[data-align=right][_nghost-%COMP%]{text-align:right}@media (orientation: portrait){[_nghost-%COMP%]{font-size:clamp(1.8rem,6vw,3.5rem)}}@media (orientation: landscape){[_nghost-%COMP%]{font-size:clamp(1.8rem,6vh,3.5rem)}}"]}),t})();var I=s(5944);const Z=["src","","alt","","ariaLabel",""];function J(t,o){if(1&t&&e._UZ(0,"app-headline",5),2&t){const n=e.oxw();e.Q6J("text",n.text)("align","center"),e.uIk("data-shown",n.textShown)}}let b=(()=>{class t{constructor(){this.disabled=!1,this.selected=new e.vpe,this.hover=new e.vpe,this.textShown=!0}ngOnInit(){}onClick(){this.textShown=!this.textShown,this.selected.emit(this.src)}onPointerEnter(n){this.hover.emit(this.src)}onPointerLeave(n){this.hover.emit(void 0)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-image","src","","alt","","ariaLabel",""]],inputs:{src:"src",alt:"alt",ariaLabel:"ariaLabel",text:"text",disabled:"disabled"},outputs:{selected:"selected",hover:"hover"},attrs:Z,decls:5,vars:5,consts:[["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1 1","fill","transparent","width","1","height","1"],[3,"disabled","click","pointerenter","pointerleave"],["svg","loading"],[3,"src","alt"],[3,"text","align",4,"ngIf"],[3,"text","align"]],template:function(n,i){1&n&&(e.O4$(),e._UZ(0,"svg",0),e.kcU(),e.TgZ(1,"button",1),e.NdJ("click",function(){return i.onClick()})("pointerenter",function(r){return i.onPointerEnter(r)})("pointerleave",function(r){return i.onPointerLeave(r)}),e._UZ(2,"app-icon",2)(3,"img",3),e.YNc(4,J,1,3,"app-headline",4),e.qZA()),2&n&&(e.xp6(1),e.Q6J("disabled",i.disabled),e.uIk("aria-label",i.ariaLabel),e.xp6(2),e.Q6J("src",i.src,e.LSH)("alt",i.alt),e.xp6(1),e.Q6J("ngIf",i.text))},dependencies:[l.O5,v,I.o],styles:["[_nghost-%COMP%]{position:relative;display:inline-flex;align-items:center}[_nghost-%COMP%]:not(.disabled) > div[_ngcontent-%COMP%]{cursor:pointer}.selected[_nghost-%COMP%]   button[_ngcontent-%COMP%], .hover[_nghost-%COMP%]   button[_ngcontent-%COMP%]{background-color:transparent;box-shadow:inset 0 0 0 .5rem var(--success)}.selected[_nghost-%COMP%]   button[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%], .hover[_nghost-%COMP%]   button[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{display:none}.selected[_nghost-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .hover[_nghost-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{z-index:-1;position:relative}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{visibility:hidden}[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{width:100%;height:100%;display:block}[_nghost-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;left:0;right:0;border-radius:2rem;overflow:hidden;aspect-ratio:1;box-shadow:inset 0 0 0 .5rem var(--gray-300);background-color:var(--gray-200)}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   app-icon[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:var(--gray-500);width:20%;height:20%}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;display:block;object-fit:cover;position:relative}[_nghost-%COMP%]   button[_ngcontent-%COMP%]:active   app-headline[_ngcontent-%COMP%]{background-color:#0009;color:#fff}@media (hover: hover){[_nghost-%COMP%]   button[_ngcontent-%COMP%]:hover   app-headline[_ngcontent-%COMP%]{background-color:#0009;color:#fff}}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   app-headline[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;padding:2rem;pointer-events:none;background:rgba(0,0,0,.5);color:#fff;transform:translateY(0);transition:transform .3s ease-in-out}[_nghost-%COMP%]   button[_ngcontent-%COMP%]   app-headline[data-shown=false][_ngcontent-%COMP%]{transform:translateY(100%)}"]}),t})();function z(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"li")(1,"button",4),e.NdJ("pointerenter",function(a){const g=e.CHM(n).$implicit,d=e.oxw();return e.KtG(d.onPointerEnter(g,a))})("pointerleave",function(a){e.CHM(n);const r=e.oxw();return e.KtG(r.onPointerLeave(a))})("click",function(){const r=e.CHM(n).$implicit,g=e.oxw();return e.KtG(g.onClick(r))}),e._uU(2),e.qZA()()}if(2&t){const n=o.$implicit,i=e.oxw();e.xp6(1),e.ekj("hover",i.hover===n)("selected",i.selected===n),e.Q6J("disabled",i.selected)("disabled",!!i.selected),e.xp6(1),e.hij(" ",n," ")}}let A=(()=>{class t{constructor(){this.names=["Simon Jensen","Jens Frederiksen","Hans Mortensen","Mikkel Hansen"]}ngOnInit(){}onSelected(n){this.selected=n}onClick(n){this.selected||(this.selected=n)}onPointerEnter(n,i){this.hover=n}onPointerLeave(n){this.hover=void 0}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-select-name"]],decls:6,vars:5,consts:[["id","image"],["src","assets/people/1.webp","text","Who is this?","ariaLabel","Toggle title shown","alt","Person face"],["id","options"],[4,"ngFor","ngForOf"],[3,"disabled","pointerenter","pointerleave","click"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0)(1,"div"),e._UZ(2,"app-image",1),e.qZA()(),e.TgZ(3,"div",2)(4,"ul"),e.YNc(5,z,3,7,"li",3),e.qZA()()),2&n&&(e.xp6(4),e.ekj("hover",i.hover&&!i.selected)("selected",i.selected),e.xp6(1),e.Q6J("ngForOf",i.names))},dependencies:[l.sg,b],styles:["[_nghost-%COMP%]{overflow:auto;display:flex;margin:0 auto;position:absolute;top:0;bottom:0;left:0;right:0;padding:2rem}@media (orientation: portrait){[_nghost-%COMP%]{flex-direction:column;flex-grow:1}}@media (orientation: landscape){[_nghost-%COMP%]{gap:2rem;justify-content:center}}#image[_ngcontent-%COMP%]{position:sticky;top:0;overflow:hidden;flex-shrink:0;background-color:var(--body-background-color);z-index:1}@media (orientation: portrait){#image[_ngcontent-%COMP%]{padding-bottom:2rem}}@media (orientation: portrait) and (max-width: 540px){#image[_ngcontent-%COMP%]   app-image[_ngcontent-%COMP%]     label{font-size:6vw}}@media (orientation: portrait) and (min-width: 541px){#image[_ngcontent-%COMP%]   app-image[_ngcontent-%COMP%]     label{font-size:3.5rem}}@media (orientation: landscape){#image[_ngcontent-%COMP%]{display:flex;max-width:50%}}@media (orientation: landscape) and (max-height: 580px){#image[_ngcontent-%COMP%]   app-image[_ngcontent-%COMP%]     label{font-size:6vh}}@media (orientation: landscape) and (min-height: 581px){#image[_ngcontent-%COMP%]   app-image[_ngcontent-%COMP%]     label{font-size:3.5rem}}#image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex}@media (orientation: portrait){#image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin:0 auto;flex-direction:column;text-align:center;max-height:min(50rem,50vh);flex-shrink:0;aspect-ratio:1;gap:2rem}}@media (orientation: landscape){#image[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{max-width:50rem}}#options[_ngcontent-%COMP%]{width:100%;align-items:center}@media (orientation: landscape){#options[_ngcontent-%COMP%]{display:grid;max-width:50rem}}#options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:grid;gap:1rem}@media (orientation: portrait){#options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0 auto;max-width:50rem}}@media (orientation: landscape){#options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin-top:-2rem;margin-bottom:-2rem;padding-top:2rem;padding-bottom:2rem}}#options[_ngcontent-%COMP%]   ul.selected[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:not(.selected){opacity:.5}#options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:flex}#options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:1.5rem 3rem;border:.1rem solid var(--gray-400);border-radius:1rem;font-size:1.6rem;width:100%;text-align:left;background-color:var(--gray-200);font-weight:700;position:relative}#options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.selected[_ngcontent-%COMP%], #options[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   button.hover[_ngcontent-%COMP%]{box-shadow:inset 0 0 0 .5rem var(--success)}"]}),t})();function N(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"app-image",6),e.NdJ("selected",function(a){e.CHM(n);const r=e.oxw();return e.KtG(r.onSelected(a))})("hover",function(a){e.CHM(n);const r=e.oxw();return e.KtG(r.onHover(a))}),e.qZA()}if(2&t){const n=o.$implicit,i=o.index,a=e.oxw();e.ekj("hover",a.hover===n&&!a.selected)("selected",a.selected===n)("disabled",a.selected),e.MGl("ariaLabel","Select person face ",i+1,"")("alt","Person face ",i,""),e.Q6J("disabled",!!a.selected)("src",n)}}let H=(()=>{class t{constructor(){this.photos=["assets/people/1.webp","assets/people/2.webp","assets/people/3.webp","assets/people/4.webp"]}ngOnInit(){}onSelected(n){this.selected=n}onHover(n){this.hover=n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-select-photo"]],decls:9,vars:7,consts:[["id","question"],[3,"text","align"],["id","options"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1 1","fill","transparent","width","1","height","1"],["id","photos"],[3,"hover","selected","disabled","src","ariaLabel","alt",4,"ngFor","ngForOf"],[3,"disabled","src","ariaLabel","alt","selected","hover"]],template:function(n,i){1&n&&(e.TgZ(0,"div",0),e._UZ(1,"app-headline",1),e.qZA(),e.TgZ(2,"div",2)(3,"div"),e.O4$(),e._UZ(4,"svg",3),e.kcU(),e.TgZ(5,"div"),e.O4$(),e._UZ(6,"svg",3),e.kcU(),e.TgZ(7,"div",4),e.YNc(8,N,1,10,"app-image",5),e.qZA()()()()),2&n&&(e.xp6(1),e.Q6J("text","Who is Simon?")("align","center"),e.xp6(6),e.ekj("hover",i.hover&&!i.selected)("selected",i.selected),e.xp6(1),e.Q6J("ngForOf",i.photos))},dependencies:[l.sg,b,v],styles:["[_nghost-%COMP%]{overflow:auto;display:flex;flex-direction:column;gap:2rem;position:absolute;top:0;bottom:0;left:0;right:0;padding:2rem}#question[_ngcontent-%COMP%]{position:sticky;top:0;background-color:var(--body-background-color);z-index:1}#options[_ngcontent-%COMP%]{height:100%;gap:2rem}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid;height:100%}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{display:none}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:grid}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{display:none}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   #photos[_ngcontent-%COMP%]{gap:2rem;justify-content:center}@media (orientation: landscape){#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   #photos[_ngcontent-%COMP%]{display:flex}}@media (orientation: portrait){#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   #photos[_ngcontent-%COMP%]{display:grid}}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   #photos.selected[_ngcontent-%COMP%] > app-image[_ngcontent-%COMP%]:not(.selected){opacity:.5}@media (min-aspect-ratio: 100/100) and (max-aspect-ratio: 100/50),(min-aspect-ratio: 50/100) and (max-aspect-ratio: 100/100){#options[_ngcontent-%COMP%]{display:grid;justify-content:center}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:inline-flex;height:unset;position:relative}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > svg[_ngcontent-%COMP%]{display:block;visibility:hidden;width:100%;height:100%}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:absolute;left:0;right:0}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   #photos[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;height:100%;width:100%;display:grid;gap:2rem;grid-template-columns:1fr 1fr}#options[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   #photos[_ngcontent-%COMP%]   app-image[_ngcontent-%COMP%]{display:flex}}"]}),t})(),$=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-loading"]],decls:2,vars:0,template:function(n,i){1&n&&(e.TgZ(0,"p"),e._uU(1,"loading..."),e.qZA())},styles:["[_nghost-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;display:grid;place-items:center;background-color:var(--loading-background);color:var(--loading-text-color)}"]}),t})();function j(t,o){1&t&&(e.ynx(0),e._UZ(1,"app-loading"),e.BQk())}function Q(t,o){1&t&&e._UZ(0,"app-select-name")}function B(t,o){1&t&&e._UZ(0,"app-select-photo")}function U(t,o){if(1&t&&(e.ynx(0),e.YNc(1,Q,1,0,"app-select-name",0),e.YNc(2,B,1,0,"app-select-photo",0),e.BQk()),2&t){const n=e.oxw().ngIf;e.xp6(1),e.Q6J("ngIf","select-name"===n.game.type),e.xp6(1),e.Q6J("ngIf","select-photo"===n.game.type)}}function Y(t,o){if(1&t&&(e.ynx(0),e.YNc(1,j,2,0,"ng-container",0),e.YNc(2,U,3,2,"ng-container",0),e.BQk()),2&t){const n=o.ngIf;e.xp6(1),e.Q6J("ngIf",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.game)}}const E=function(t,o){return{game:t,isLoading:o}},K=[{path:"",component:(()=>{class t{constructor(n,i){this.gameStore=n,this.route=i,this.game$=this.gameStore.select(L),this.isLoading$=this.gameStore.select(k)}ngOnInit(){this.loadGame()}loadGame(){this.route.paramMap.pipe((0,S.q)(1)).subscribe(n=>{const i=n.get("id"),a=i?parseInt(i):void 0;a&&this.gameStore.dispatch(C({id:a}))})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.yh),e.Y36(m.gz))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-game"]],decls:3,vars:8,consts:[[4,"ngIf"]],template:function(n,i){1&n&&(e.YNc(0,Y,3,2,"ng-container",0),e.ALo(1,"async"),e.ALo(2,"async")),2&n&&e.Q6J("ngIf",e.WLB(5,E,e.lcZ(1,1,i.game$),e.lcZ(2,3,i.isLoading$)))},dependencies:[l.O5,A,H,$,l.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}"]}),t})(),data:{pageType:w.W.game}}];let R=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[m.Bz.forChild(K),m.Bz]}),t})();var p=s(8776),X=s(6129),W=s(3900),q=s(262),D=s(8505),V=s(9646),ee=s(2843),te=s(4707);let ne=(()=>{class t{constructor(){}fetchGame(n){if(console.log("fetchGame"),1!==n&&2!==n)return(0,ee._)(()=>new Error("game not found"));const i=new te.t(1),a=1===n?this.game1():this.game2();return setTimeout(()=>{i.next(a)},1e3),i}game1(){return{id:1,type:"select-name",gameStatus:"not-started",difficulty:"easy",title:"select name game 1",questions:[{id:1,options:[],title:"question 1"},{id:2,options:[],title:"question 2"},{id:3,options:[],title:"question 3"}],answers:[]}}game2(){return{id:2,type:"select-photo",gameStatus:"not-started",difficulty:"easy",title:"select photo game 1",questions:[{id:1,options:[{id:1,image:"assets/people/1.webp"},{id:2,image:"assets/people/2.webp"},{id:3,image:"assets/people/3.webp"},{id:4,image:"assets/people/4.webp"}],title:"question 1"},{id:2,options:[],title:"question 2"},{id:3,options:[],title:"question 3"}],answers:[]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),oe=(()=>{class t{constructor(n,i,a,r){this.actions$=n,this.gameApiService=i,this.router=a,this.gameStore=r,this.fetchGame$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(C),(0,X.z)(g=>(this.gameStore.dispatch(f()),this.gameApiService.fetchGame(g.id).pipe((0,W.w)(d=>[M({game:d})]),(0,q.K)(d=>(0,V.of)(h({error:d})))))))),this.fetchGameFailure$=(0,p.GW)(()=>this.actions$.pipe((0,p.l4)(h),(0,D.b)(g=>{this.router.navigate(["/error"],{skipLocationChange:!0})})),{dispatch:!1})}}return t.\u0275fac=function(n){return new(n||t)(e.LFG(p.eX),e.LFG(ne),e.LFG(m.F0),e.LFG(c.yh))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac}),t})(),y=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez]}),t})();var ie=s(2876);let x=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,y,ie.Q]}),t})(),ae=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,x]}),t})(),se=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,x,y]}),t})(),ce=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez]}),t})(),re=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.ez,R,c.Aw.forFeature(P,F),p.sQ.forFeature([oe]),ae,se,ce]}),t})()}}]);